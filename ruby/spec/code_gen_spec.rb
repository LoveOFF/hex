require_relative 'spec_helper'

describe 'Hex' do

  let(:code_gen) { CodeGen.new }

  def to_a str
    str.strip.split("\n")
  end

  it '#battle_items' do
    all, valid = code_gen.battle_items

    expected_all = to_a(<<-S)
All battle items (64)
80010008 B2692691
67BCE244 00000000
8801000C 40000000
D8A2612D 7820C83E
92000000 0000000C
28000000 01003103
28000010 01005074
28000020 01005075
28000030 010050C9
28000040 010050CB
28000050 010050CC
28000060 01006134
28000070 01006A14
28000080 0100FEBE
28000090 010112B8
280000A0 0101FF91
280000B0 0101FF93
280000C0 0101FF94
280000D0 0102B49B
280000E0 0103825C
280000F0 01038292
28000100 01038293
28000110 01038294
28000120 01038295
28000130 01038296
28000140 01038297
28000150 01038298
28000160 0103A50E
28000170 0103FFA7
28000180 0104583A
28000190 0104FD4B
280001A0 01050967
280001B0 01050968
280001C0 01050AD1
280001D0 01050AD2
280001E0 01055753
280001F0 01055754
28000200 01055755
28000210 01055756
28000220 01055921
28000230 01055A40
28000240 01056FDE
28000250 01057140
28000260 01057141
28000270 0105B680
28000280 0105B681
28000290 0105B682
280002A0 0105B683
280002B0 0105B684
280002C0 0105B685
280002D0 0105B686
280002E0 0105B687
280002F0 0105B688
28000300 0105B689
28000310 0105D260
28000320 0105D261
28000330 0105D262
28000340 0105D263
28000350 0105D7A5
28000360 0105D7A6
28000370 0105D7A7
28000380 0105D7A8
28000390 0105D7A9
280003A0 0105D7AA
280003B0 0105D7AB
280003C0 0105D7AC
280003D0 0105D7AD
280003E0 0105D7AE
280003F0 0105D7B5
4A000004 00000063
40400010 00000000
    S

    expected_valid = to_a(<<-S)
Valid battle items (52)
80010008 B2692691
67BCE244 00000000
8801000C 40000000
D8A2612D 7820C83E
92000000 0000000C
28000000 01003103
28000010 01005074
28000020 01005075
28000030 010050C9
28000040 010050CB
28000050 010050CC
28000060 01006134
28000070 01006A14
28000080 0100FEBE
28000090 010112B8
280000A0 0101FF91
280000B0 0101FF93
280000C0 0101FF94
280000D0 0102B49B
280000E0 0103825C
280000F0 01038292
28000100 01038293
28000110 01038294
28000120 01038295
28000130 01038296
28000140 01038297
28000150 01038298
28000160 0103FFA7
28000170 0104583A
28000180 01050967
28000190 01050968
280001A0 01050AD1
280001B0 01050AD2
280001C0 01055753
280001D0 01055754
280001E0 01055755
280001F0 01055756
28000200 01055921
28000210 01055A40
28000220 01056FDE
28000230 01057140
28000240 01057141
28000250 0105D260
28000260 0105D261
28000270 0105D262
28000280 0105D263
28000290 0105D7A5
280002A0 0105D7A6
280002B0 0105D7A7
280002C0 0105D7A8
280002D0 0105D7A9
280002E0 0105D7AA
280002F0 0105D7AB
28000300 0105D7AC
28000310 0105D7AD
28000320 0105D7AE
28000330 0105D7B5
4A000004 00000063
40340010 00000000
    S

    expect(all).to eq(expected_all)
    expect(valid).to eq(expected_valid)
  end

  it '#reset_magic_code' do
    expected = <<-'S'
Reset magic flasks (1 of 2)
80110008 8AD2D101
AF89E690 00000000
28000008 01016CE6
2800000C 00000000
28000010 FFFFFF00
28000014 FFFFFFFF
28000018 000000FF
2800001C 00000000
28000020 00000000
28000024 00000000
28000028 00000000
2800002C 00000000
28000030 00000000
08000034 00000000
80120008 8AD2D101
AF89E690 00000000
28000008 01016CE6
2800000C 00000000
28000010 FFFFFF00
28000014 FFFFFFFF
28000018 000000FF
2800001C 00000000
28000020 00000000
28000024 00000000
28000028 00000000
2800002C 00000000
28000030 00000000
08000034 00000000
80130008 8AD2D101
AF89E690 00000000
28000008 01016CE6
2800000C 00000000
28000010 FFFFFF00
28000014 FFFFFFFF
28000018 000000FF
2800001C 00000000
28000020 00000000
28000024 00000000
28000028 00000000
2800002C 00000000
28000030 00000000
08000034 00000000
80140008 8AD2D101
AF89E690 00000000
28000008 01016CE6
2800000C 00000000
28000010 FFFFFF00
28000014 FFFFFFFF
28000018 000000FF
2800001C 00000000
28000020 00000000
28000024 00000000
28000028 00000000
2800002C 00000000
28000030 00000000
08000034 00000000
80150008 8AD2D101
AF89E690 00000000
28000008 01016CE6
2800000C 00000000
28000010 FFFFFF00
28000014 FFFFFFFF
28000018 000000FF
2800001C 00000000
28000020 00000000
28000024 00000000
28000028 00000000
2800002C 00000000
28000030 00000000
08000034 00000000
80160008 8AD2D101
AF89E690 00000000
28000008 01016CE6
2800000C 00000000
28000010 FFFFFF00
28000014 FFFFFFFF
28000018 000000FF
2800001C 00000000
28000020 00000000
28000024 00000000
28000028 00000000
2800002C 00000000
28000030 00000000
08000034 00000000
80170008 8AD2D101
AF89E690 00000000
28000008 01016CE6
2800000C 00000000
28000010 FFFFFF00
28000014 FFFFFFFF
28000018 000000FF
2800001C 00000000
28000020 00000000
28000024 00000000
28000028 00000000
2800002C 00000000
28000030 00000000
08000034 00000000

Reset magic flasks (2 of 2)
80180008 8AD2D101
AF89E690 00000000
28000008 01016CE6
2800000C 00000000
28000010 FFFFFF00
28000014 FFFFFFFF
28000018 000000FF
2800001C 00000000
28000020 00000000
28000024 00000000
28000028 00000000
2800002C 00000000
28000030 00000000
08000034 00000000
80190008 8AD2D101
AF89E690 00000000
28000008 01016CE6
2800000C 00000000
28000010 FFFFFF00
28000014 FFFFFFFF
28000018 000000FF
2800001C 00000000
28000020 00000000
28000024 00000000
28000028 00000000
2800002C 00000000
28000030 00000000
08000034 00000000
801A0008 8AD2D101
AF89E690 00000000
28000008 01016CE6
2800000C 00000000
28000010 FFFFFF00
28000014 FFFFFFFF
28000018 000000FF
2800001C 00000000
28000020 00000000
28000024 00000000
28000028 00000000
2800002C 00000000
28000030 00000000
08000034 00000000
801B0008 8AD2D101
AF89E690 00000000
28000008 01016CE6
2800000C 00000000
28000010 FFFFFF00
28000014 FFFFFFFF
28000018 000000FF
2800001C 00000000
28000020 00000000
28000024 00000000
28000028 00000000
2800002C 00000000
28000030 00000000
08000034 00000000
801C0008 8AD2D101
AF89E690 00000000
28000008 01016CE6
2800000C 00000000
28000010 FFFFFF00
28000014 FFFFFFFF
28000018 000000FF
2800001C 00000000
28000020 00000000
28000024 00000000
28000028 00000000
2800002C 00000000
28000030 00000000
08000034 00000000
801D0008 8AD2D101
AF89E690 00000000
28000008 01016CE6
2800000C 00000000
28000010 FFFFFF00
28000014 FFFFFFFF
28000018 000000FF
2800001C 00000000
28000020 00000000
28000024 00000000
28000028 00000000
2800002C 00000000
28000030 00000000
08000034 00000000
801E0008 8AD2D101
AF89E690 00000000
28000008 01016CE6
2800000C 00000000
28000010 FFFFFF00
28000014 FFFFFFFF
28000018 000000FF
2800001C 00000000
28000020 00000000
28000024 00000000
28000028 00000000
2800002C 00000000
28000030 00000000
08000034 00000000
S

    expect(code_gen.reset_magic_code).to eq(expected)

  end
end
